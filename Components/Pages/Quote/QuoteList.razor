@page "/"
@page "/quotes"

@inject QuoteService _quoteService


<div class="container bg-gray-100 h-full py-10 m-0">
    <ContentViewHeader 
        Title="Quotes"
        Description="A list of all your quotes including their name, sales associate and created and last updated dates"
        ButtonLabel="Add Quote"
        OnClick=@AddQuote
    />
    <DataGridWrapper>
        <DataGrid Items=@_quotes>
            <PropertyColumn 
                TGridItem=Quote
                TProp=string
                Title="Name"
                Property=@(q => q.Name)
                Sortable="true" 
            />
            <PropertyColumn 
                TGridItem=Quote 
                TProp=QuoteStatus
                Title="Status"
                Property=@(q => q.Status)
                Sortable=true
            />
            <PropertyColumn 
                TGridItem=Quote 
                TProp=string 
                Title="Sales Associate"
                Property=@(q => q.SalesAssociate)
                Sortable=true
            />
            <PropertyColumn 
                TGridItem=Quote 
                TProp=DateTime 
                Title="Last Updated"
                Property=@(q => q.UpdatedAt)
                Format="HH:mm tt MMMM d, yyyy"
                Sortable=true 
            />
            <TemplateColumn TGridItem="Quote" Class="flex justify-end">
                <EditIcon Class="cursor-pointer mr-3 hover:stroke-sky-500 duration-300 ease-in-out" />
                <TrashIcon Class="cursor-pointer hover:stroke-rose-500 duration-300 ease-in-out" />
            </TemplateColumn>
        </DataGrid>
    </DataGridWrapper>
</div>

@code {
    private IQueryable<Quote> _quotes;

    protected override void OnInitialized()
    {
        _quotes = _quoteService.GetQuotesAsQueryable();
    }

    private async Task AddQuote()
    {
        Console.WriteLine("Add Quote");
    }

    private async Task EditQuote()
    {
        Console.WriteLine("Edit Quote");
    }

    private async Task DeleteQuote()
    {
        Console.WriteLine("Delete Quote");
    }
}

@* https://github.com/dotnet/vscode-dotnet-runtime/blob/main/Documentation/troubleshooting-runtime.md *@